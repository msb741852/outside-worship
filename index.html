<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0, user-scalable=yes">
    <title>ì˜ˆë°° ì°¬ì–‘ ì•…ë³´</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <style>
        :root { --bg-color: #f8f9fa; --text-color: #212529; --ui-bg: rgba(255, 255, 255, 0.95); }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg-color); color: var(--text-color); font-family: 'Pretendard', sans-serif; overflow: hidden; }
        
        .header { position: fixed; top: 0; width: 100%; height: 55px; background: var(--ui-bg); display: flex; align-items: center; justify-content: center; z-index: 10; font-size: 18px; font-weight: 600; box-shadow: 0 1px 5px rgba(0,0,0,0.05); transition: opacity 0.3s; }
        .footer { position: fixed; bottom: 0; width: 100%; height: 60px; background: var(--ui-bg); display: flex; justify-content: space-around; align-items: center; z-index: 10; box-shadow: 0 -1px 5px rgba(0,0,0,0.05); transition: opacity 0.3s; }
        .footer button { background: none; border: none; font-size: 16px; font-weight: 500; color: #007AFF; padding: 10px 20px; cursor: pointer; }

        body.focus-mode .header, body.focus-mode .footer { opacity: 0; pointer-events: none; }

        .swiper { width: 100%; height: 100vh; z-index: 1; }
        .swiper-slide { display: flex; align-items: center; justify-content: center; }
        .score-img { max-width: 100%; max-height: 100vh; object-fit: contain; }
        
        .setlist-overlay { position: fixed; top: 100%; left: 0; width: 100%; height: 100%; background: var(--bg-color); z-index: 20; transition: top 0.3s ease-in-out; display: flex; flex-direction: column; }
        .setlist-overlay.active { top: 0; }
        .setlist-header { padding: 20px; font-size: 20px; font-weight: bold; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; }
        .close-btn { color: #dc3545; font-weight: bold; cursor: pointer; }
        .setlist-items { list-style: none; padding: 0; margin: 0; overflow-y: auto; }
        .setlist-items li { padding: 18px 20px; border-bottom: 1px solid #eee; font-size: 16px; cursor: pointer; }
        .setlist-items li:active { background: #e9ecef; }
    </style>
</head>
<body>

    <div class="header" id="song-title">ì¤€ë¹„ ì°¬ì–‘</div>

    <div class="swiper">
        <div class="swiper-wrapper" id="slide-container"></div>
    </div>

    <div class="footer">
        <button onclick="swiper.slidePrev()">ì´ì „</button>
        <button id="btn-list">ëª©ë¡ ë³´ê¸°</button>
        <button onclick="swiper.slideNext()">ë‹¤ìŒ</button>
    </div>

    <div class="setlist-overlay" id="setlist">
        <div class="setlist-header">
            <span>ì°¬ì–‘ ëª©ë¡</span>
            <span class="close-btn" id="btn-close-list">ë‹«ê¸°</span>
        </div>
        <ul class="setlist-items" id="setlist-ul"></ul>
    </div>

    <script>
        // ğŸµ 1. ì•…ë³´ ë°ì´í„° ë°°ì—´ (ì´ ë¶€ë¶„ë§Œ ê´€ë¦¬í•˜ì‹œë©´ ë©ë‹ˆë‹¤!)
        // ìˆœì„œë¥¼ ë°”ê¾¸ë ¤ë©´ ë°°ì—´ ìš”ì†Œì˜ ìœ„ì¹˜ë¥¼ ìœ„ì•„ë˜ë¡œ ì˜®ê¸°ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.
        const songList = [
            { title: "1. ì°¸ ì•„ë¦„ë‹¤ì™€ë¼", img: "img/ì°¸_ì•„ë¦„ë‹¤ì™€ë¼.jpg" },
            { title: "2. ë‚˜ëŠ” ì˜ˆë°°ìì…ë‹ˆë‹¤ / ì†Œì›", img: "img/ë‚˜ëŠ”_ì˜ˆë°°ìì…ë‹ˆë‹¤,ì†Œì›.png" },
            { title: "3. í•¨ê»˜ ì§€ì–´ì ¸ê°€ë„¤", img: "img/í•¨ê»˜_ì§€ì–´ì ¸ê°€ë„¤.jpg" }
        ];

        let swiper;

        $(document).ready(function() {
            const $slideContainer = $('#slide-container');
            const $setlistUl = $('#setlist-ul');

            // ğŸµ 2. ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ HTML ë™ì  ë Œë”ë§
            songList.forEach((song, index) => {
                // ìŠ¬ë¼ì´ë“œ ìš”ì†Œ ìƒì„±
                const slideHtml = `
                    <div class="swiper-slide" data-title="${song.title}">
                        <div class="swiper-zoom-container">
                            <img src="${song.img}" class="score-img" alt="${song.title}">
                        </div>
                    </div>
                `;
                $slideContainer.append(slideHtml);

                // ê³¡ ëª©ë¡(Setlist) ìš”ì†Œ ìƒì„±
                const listHtml = `<li data-index="${index}">${song.title}</li>`;
                $setlistUl.append(listHtml);
            });

            // ğŸµ 3. DOM ìƒì„±ì´ ì™„ë£Œëœ í›„ Swiper ì´ˆê¸°í™”
            swiper = new Swiper('.swiper', {
                zoom: { maxRatio: 3 },
                loop: false,
                on: {
                    slideChange: function () {
                        const activeSlide = this.slides[this.activeIndex];
                        $('#song-title').text($(activeSlide).data('title'));
                    }
                }
            });

            // ì´ˆê¸° ì œëª© ì„¸íŒ… (ì²« ë²ˆì§¸ ê³¡)
            if (songList.length > 0) {
                $('#song-title').text(songList[0].title);
            }

            // ğŸµ 4. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¸íŒ…
            // ëª°ì… ëª¨ë“œ (í™”ë©´ í„°ì¹˜ ì‹œ ë©”ë‰´ ìˆ¨ê¹€)
            $('#slide-container').on('click', function() {
                $('body').toggleClass('focus-mode');
            });

            // ê³¡ ëª©ë¡ ì—´ê¸°/ë‹«ê¸°
            $('#btn-list').on('click', function() {
                $('#setlist').addClass('active');
            });
            $('#btn-close-list').on('click', function() {
                $('#setlist').removeClass('active');
            });

            // ê³¡ ëª©ë¡ì—ì„œ ì„ íƒ ì‹œ í•´ë‹¹ ìŠ¬ë¼ì´ë“œë¡œ ì´ë™
            $('#setlist-ul').on('click', 'li', function() {
                const targetIndex = $(this).data('index');
                swiper.slideTo(targetIndex);
                $('#setlist').removeClass('active');
            });
        });
    </script>
</body>
</html>